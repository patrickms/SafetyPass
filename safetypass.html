<html>
<head>
<script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
<style>
    @font-face {
    font-family: passwordFont;
    src: url(password.ttf);
}

#domainpass {
    font-family: passwordFont;
}

input, textarea, select{font-family:inherit;}

.input{
padding:5px;
font-size:16px;
}
</style>
</head>
<body>

    <form>
        Domain: <input id="domain" type="text" name="domain"><br>
        Master Password: <input id="masterpass" type="password" name="masterpass"><br>
        Domain Specific Password: <input id="domainpass" type="text" name="domainpass">
        <input type="button" value="Generate Password" onclick="javascript: genPass();"/>
    </form>
<script>
    var hash = CryptoJS.MD5("Message");
    var PARENT_DOMAIN=""
    //alert("Message: "+hash)
    window.parent.postMessage("Which Domain?","*");
    //alert('sent');
    window.addEventListener("message", receiveMessage, false);

    function receiveMessage(event)
    {
        document.getElementById("domain").value=event.data;
        
          // ...
    }
    
    function genPass()
    {
        var hash = CryptoJS.MD5(document.getElementById("domain").value + " " + document.getElementById("masterpass").value);
        //alert("hash: "+hash)
        document.getElementById("domainpass").setAttribute("value", hash.toString());
    }
    

</script>
</body>
</html>
